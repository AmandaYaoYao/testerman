
<!DOCTYPE html>


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>SSH Probe &mdash; Testerman 1.4.0 documentation</title>
    
    <link rel="stylesheet" href="../../_static/basic.css" type="text/css" />
    <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
    <link rel="stylesheet" href="../../_static/css/bootstrap-2.2.1.min.css" type="text/css" />
    <link rel="stylesheet" href="../../_static/bootstrap-sphinx.css" type="text/css" />
    <link rel="stylesheet" href="../../_static/css/bootstrap-responsive-2.2.1.min.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../../',
        VERSION:     '1.4.0',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="../../_static/jquery.js"></script>
    <script type="text/javascript" src="../../_static/underscore.js"></script>
    <script type="text/javascript" src="../../_static/doctools.js"></script>
    <script type="text/javascript" src="../../_static/js/bootstrap-2.2.1.min.js"></script>
    <script type="text/javascript" src="../../_static/bootstrap-sphinx.js"></script>
    <link rel="top" title="Testerman 1.4.0 documentation" href="../../index.html" />
    <link rel="up" title="&lt;no title&gt;" href="toc.html" />
    <link rel="next" title="Configuration File Probe" href="ProbeConfigurationFile.html" />
    <link rel="prev" title="File Manager Probe" href="ProbeFileManager.html" />
<meta charset='utf-8'>
<meta http-equiv='X-UA-Compatible' content='IE=edge,chrome=1'>
<meta name='viewport' content='width=device-width, initial-scale=1.0, maximum-scale=1'>
<meta name="apple-mobile-web-app-capable" content="yes">

  </head>
  <body>
<div class="container">
  
  <div id="navbar" class="navbar navbar-inverse navbar-fixed-top">
    <div class="navbar-inner">
      <!-- .btn-navbar is used as the toggle for collapsed navbar content -->
      <button class="btn btn-navbar" data-toggle="collapse" data-target=".nav-collapse">
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>

      <a class="brand" href="../../index.html">Testerman</a>
      <span class="navbar-text pull-left"><b>1.4</b></span>

      <div class="nav-collapse">
        <ul class="nav">
          <li class="divider-vertical"></li>
          
            <li class="dropdown">
  <a href="../../index.html" class="dropdown-toggle" data-toggle="dropdown">Site <b class="caret"></b></a>
  <ul class="dropdown-menu globaltoc"><ul>
<li class="toctree-l1"><a class="reference internal" href="../../main/About.html">Welcome to Testerman</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../main/About.html#about">About</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../main/About.html#contact">Contact</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../main/GetTesterman.html">Getting Testerman</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../main/TestermanOverview.html">Testerman Overview</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../main/TestermanQuickStart.html">Quick Start</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../main/TestermanQuickStart.html#external-resources">External Resources</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../main/QTesterman.html">QTesterman</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../main/TestermanReferenceGuide.html">Testerman Reference Guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../main/TestermanLanguageReference.html">General Concepts</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../main/TestermanLanguageReference.html#reference-testerman-api">Reference: Testerman API</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../main/BestPractices.html">Best Practices</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../index.html">Codecs and Probes Overview</a></li>
<li class="toctree-l1"><a class="reference internal" href="../index.html#codecs">Codecs</a></li>
<li class="toctree-l1"><a class="reference internal" href="../index.html#test-adapters-probes">Test Adapters (Probes)</a></li>
<li class="toctree-l1"><a class="reference internal" href="../index.html#codecs-and-probes-references">Codecs and Probes References</a></li>
<li class="toctree-l1"><a class="reference internal" href="../index.html#developing-new-codecs-and-probes">Developing New Codecs and Probes</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../main/TestermanAdministrationGuide.html">Testerman Administration Guide</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../main/TestermanInternals.html">Testerman Internals</a></li>
</ul>
</ul>
</li>
            <li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown">Page <b class="caret"></b></a>
  <ul class="dropdown-menu localtoc"><ul>
<li><a class="reference internal" href="#">SSH Probe</a><ul>
<li><a class="reference internal" href="#identification-and-properties">Identification and Properties</a></li>
<li><a class="reference internal" href="#overview">Overview</a><ul>
<li><a class="reference internal" href="#availability">Availability</a></li>
<li><a class="reference internal" href="#dependencies">Dependencies</a></li>
<li><a class="reference internal" href="#see-also">See Also</a></li>
</ul>
</li>
<li><a class="reference internal" href="#ttcn-3-types-equivalence">TTCN-3 Types Equivalence</a></li>
</ul>
</li>
</ul>
</ul>
</li>
          
          
            
  <li><a href="ProbeFileManager.html"
         title="previous chapter">&laquo; File Manager Probe</a></li>
  <li><a href="ProbeConfigurationFile.html"
         title="next chapter">Configuration File Probe &raquo;</a></li>
          
          
            <li>
  <a href="../../_sources/plugins/autogen/ProbeSsh.txt"
     rel="nofollow">Source</a></li>
          
        </ul>

        
          
<form class="navbar-search pull-right" style="margin-bottom:-3px;" action="../../search.html" method="get">
  <input type="text" name="q" placeholder="Search" />
  <input type="hidden" name="check_keywords" value="yes" />
  <input type="hidden" name="area" value="default" />
</form>
        
      </div>
    </div>
  </div>

  
  <div class="section" id="ssh-probe">
<h1>SSH Probe<a class="headerlink" href="#ssh-probe" title="Permalink to this headline">¶</a></h1>
<p>Execute a command via a remote SSH shell.</p>
<div class="section" id="identification-and-properties">
<h2>Identification and Properties<a class="headerlink" href="#identification-and-properties" title="Permalink to this headline">¶</a></h2>
<p>Probe Type ID: <tt class="docutils literal"><span class="pre">ssh</span></tt></p>
<p>Properties:</p>
<table border="1" class="docutils">
<colgroup>
<col width="25%" />
<col width="25%" />
<col width="25%" />
<col width="25%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Name</th>
<th class="head">Type</th>
<th class="head">Default value</th>
<th class="head">Description.</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td><tt class="docutils literal"><span class="pre">host</span></tt></td>
<td>string</td>
<td><tt class="docutils literal"><span class="pre">'localhost'</span></tt></td>
<td>to host to connect onto to execute the commands.</td>
</tr>
<tr class="row-odd"><td><tt class="docutils literal"><span class="pre">username</span></tt></td>
<td>string</td>
<td>(none)</td>
<td>the username to use to log onto <tt class="docutils literal"><span class="pre">host</span></tt> to execute the commands.</td>
</tr>
<tr class="row-even"><td><tt class="docutils literal"><span class="pre">password</span></tt></td>
<td>string</td>
<td>(none)</td>
<td>the <tt class="docutils literal"><span class="pre">username</span></tt>&#8216;s password on <tt class="docutils literal"><span class="pre">host</span></tt>.</td>
</tr>
<tr class="row-odd"><td><tt class="docutils literal"><span class="pre">timeout</span></tt></td>
<td>float</td>
<td><tt class="docutils literal"><span class="pre">5.0</span></tt></td>
<td>the maximum amount of time, in s, allowed to __start__ executing the command on <tt class="docutils literal"><span class="pre">host</span></tt>. Includes the SSH login sequence.</td>
</tr>
<tr class="row-even"><td><tt class="docutils literal"><span class="pre">convert_eol</span></tt></td>
<td>boolean</td>
<td><tt class="docutils literal"><span class="pre">True</span></tt></td>
<td>if set to True, convert <tt class="docutils literal"><span class="pre">\r\n</span></tt> in output to <tt class="docutils literal"><span class="pre">\n</span></tt>. This way, the templates are compatible with ProbeExec.</td>
</tr>
<tr class="row-odd"><td><tt class="docutils literal"><span class="pre">working_dir</span></tt></td>
<td>string</td>
<td>(none)</td>
<td>the diretory to go to before executing the command line. By default, the working dir is the login directory (usually the home dir).</td>
</tr>
<tr class="row-even"><td><tt class="docutils literal"><span class="pre">strict_host</span></tt></td>
<td>boolean</td>
<td><tt class="docutils literal"><span class="pre">True</span></tt></td>
<td>if set to False, the probe removes the target host from $HOME/.ssh/known_hosts to avoid failing when connecting to an updated host. Otherwise, the connection fails if the SSH key changed.</td>
</tr>
<tr class="row-odd"><td><tt class="docutils literal"><span class="pre">max_line_length</span></tt></td>
<td>integer</td>
<td><tt class="docutils literal"><span class="pre">150</span></tt></td>
<td>the max number of characters before splitting a line over multiple lines with a -based continuation. Currently the splitting algorithm is pretty dumb and may split your command line in the middle of a quoted argument, possibly changing its actual value. Increasing this size may be a workaround in such cases.</td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="overview">
<h2>Overview<a class="headerlink" href="#overview" title="Permalink to this headline">¶</a></h2>
<p>This probe implements a single shot command execution interface (the same as ProbeExec) through SSH.</p>
<p>Basically you just specify a command to execute that will be executed within a shell, and you get a response
once its execution is over. The response contains both an integer return code and the whole command output.</p>
<p>If you consider the command execution is too long (no response received), you can cancel it at any time from the
userland. Such a cancellation terminates all the subprocess tree with a SIGKILL signal. Once cancelled,
you should not expect a command response anymore.</p>
<p>No interaction is possible during the command execution.</p>
<p>Like ProbeExec, this probe is not re-entrant and is only able to execute one command at a time. You can execute another one
(using the <tt class="docutils literal"><span class="pre">ExecCommand</span></tt> <tt class="docutils literal"><span class="pre">execute</span></tt> message template) only when the previous command
execution was either complete (i.e. you received a <tt class="docutils literal"><span class="pre">ExecResponse</span></tt> message) or cancelled via a <tt class="docutils literal"><span class="pre">ExecCommand</span></tt> <tt class="docutils literal"><span class="pre">cancel</span></tt> command
(no response in this case).</p>
<p>If you need to execute multiple commands in parallel, you should use multiple probes - consider that each one is as if you
had one open ssh terminal connection to your SUT.</p>
<p>Notes:</p>
<ul class="simple">
<li>When starting daemons from this probe, make sure that your daemon correctly closes standard output,
otherwise the probe never detects the command as being complete. For poorly written daemonized programs,
adding a <tt class="docutils literal"><span class="pre">&gt;/dev/null</span> <span class="pre">2&gt;&amp;1</span></tt> in the <tt class="docutils literal"><span class="pre">execute</span></tt> command line is usually enough to make the probe return in such cases.</li>
</ul>
<div class="section" id="availability">
<h3>Availability<a class="headerlink" href="#availability" title="Permalink to this headline">¶</a></h3>
<p>All POSIX platforms. Windows platforms are not supported.</p>
</div>
<div class="section" id="dependencies">
<h3>Dependencies<a class="headerlink" href="#dependencies" title="Permalink to this headline">¶</a></h3>
<p>Requires a ssh client installed on the machine running the probe, as it is only a wrapper over it.</p>
</div>
<div class="section" id="see-also">
<h3>See Also<a class="headerlink" href="#see-also" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><a class="reference internal" href="ProbeExec.html"><em>Local Execution Probe</em></a>, implementing the same port type for local execution (convenient when you have no SSH access to your machine, but you must deploy an agent on it)</li>
<li><a class="reference internal" href="ProbeExecInteractive.html"><em>Local Interactive Execution Probe</em></a>, to run a command line program and interact with it (CLI testing, etc)</li>
</ul>
</div>
</div>
<div class="section" id="ttcn-3-types-equivalence">
<h2>TTCN-3 Types Equivalence<a class="headerlink" href="#ttcn-3-types-equivalence" title="Permalink to this headline">¶</a></h2>
<p>The test system interface port bound to such a probe complies with the <tt class="docutils literal"><span class="pre">ExecPortType</span></tt> port type as specified below:</p>
<div class="highlight-python"><pre>type union ExecCommand
{
  charstring execute,
  anytype    cancel
}

type record ExecResponse
{
  integer status,
  charstring output
}

type charstring ErrorResponse;

type port ExecPortType message
{
  in  ExecCommand;
  out ExecResponse, ErrorResponse;
}</pre>
</div>
</div>
</div>


</div>
<footer class="footer">
  <div class="container">
    <p class="pull-right">
      <a href="#">Back to top</a>
      
    </p>
    <p>
        &copy; Copyright 2009-2013, Sébastien Lefèvre.<br/>
      Created using <a href="http://sphinx.pocoo.org/">Sphinx</a> 1.1.3.<br/>
    </p>
  </div>
</footer>

<script type="text/javascript">
  var _gaq = _gaq || [];
  _gaq.push(['_setAccount', 'UA-7213508-2']);
  _gaq.push(['_trackPageview']);
  (function() {
    var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
    ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
  })();
</script>
  </body>
</html>