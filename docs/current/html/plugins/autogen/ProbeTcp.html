
<!DOCTYPE html>


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>TCP Probe &mdash; Testerman 1.4.0 documentation</title>
    
    <link rel="stylesheet" href="../../_static/basic.css" type="text/css" />
    <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
    <link rel="stylesheet" href="../../_static/css/bootstrap-2.2.1.min.css" type="text/css" />
    <link rel="stylesheet" href="../../_static/bootstrap-sphinx.css" type="text/css" />
    <link rel="stylesheet" href="../../_static/css/bootstrap-responsive-2.2.1.min.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../../',
        VERSION:     '1.4.0',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="../../_static/jquery.js"></script>
    <script type="text/javascript" src="../../_static/underscore.js"></script>
    <script type="text/javascript" src="../../_static/doctools.js"></script>
    <script type="text/javascript" src="../../_static/js/bootstrap-2.2.1.min.js"></script>
    <script type="text/javascript" src="../../_static/bootstrap-sphinx.js"></script>
    <link rel="top" title="Testerman 1.4.0 documentation" href="../../index.html" />
    <link rel="up" title="&lt;no title&gt;" href="toc.html" />
    <link rel="next" title="UDP Probe" href="ProbeUdp.html" />
    <link rel="prev" title="RTSP Codecs" href="CodecsRtsp.html" />
<meta charset='utf-8'>
<meta http-equiv='X-UA-Compatible' content='IE=edge,chrome=1'>
<meta name='viewport' content='width=device-width, initial-scale=1.0, maximum-scale=1'>
<meta name="apple-mobile-web-app-capable" content="yes">

  </head>
  <body>
<div class="container">
  
  <div id="navbar" class="navbar navbar-inverse navbar-fixed-top">
    <div class="navbar-inner">
      <!-- .btn-navbar is used as the toggle for collapsed navbar content -->
      <button class="btn btn-navbar" data-toggle="collapse" data-target=".nav-collapse">
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>

      <a class="brand" href="../../index.html">Testerman</a>
      <span class="navbar-text pull-left"><b>1.4</b></span>

      <div class="nav-collapse">
        <ul class="nav">
          <li class="divider-vertical"></li>
          
            <li class="dropdown">
  <a href="../../index.html" class="dropdown-toggle" data-toggle="dropdown">Site <b class="caret"></b></a>
  <ul class="dropdown-menu globaltoc"><ul>
<li class="toctree-l1"><a class="reference internal" href="../../main/About.html">Welcome to Testerman</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../main/About.html#about">About</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../main/About.html#contact">Contact</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../main/GetTesterman.html">Getting Testerman</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../main/TestermanOverview.html">Testerman Overview</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../main/TestermanQuickStart.html">Quick Start</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../main/TestermanQuickStart.html#external-resources">External Resources</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../main/QTesterman.html">QTesterman</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../main/TestermanReferenceGuide.html">Testerman Reference Guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../main/TestermanLanguageReference.html">General Concepts</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../main/TestermanLanguageReference.html#reference-testerman-api">Reference: Testerman API</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../main/BestPractices.html">Best Practices</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../index.html">Codecs and Probes Overview</a></li>
<li class="toctree-l1"><a class="reference internal" href="../index.html#codecs">Codecs</a></li>
<li class="toctree-l1"><a class="reference internal" href="../index.html#test-adapters-probes">Test Adapters (Probes)</a></li>
<li class="toctree-l1"><a class="reference internal" href="../index.html#codecs-and-probes-references">Codecs and Probes References</a></li>
<li class="toctree-l1"><a class="reference internal" href="../index.html#developing-new-codecs-and-probes">Developing New Codecs and Probes</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../main/TestermanAdministrationGuide.html">Testerman Administration Guide</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../main/TestermanInternals.html">Testerman Internals</a></li>
</ul>
</ul>
</li>
            <li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown">Page <b class="caret"></b></a>
  <ul class="dropdown-menu localtoc"><ul>
<li><a class="reference internal" href="#">TCP Probe</a><ul>
<li><a class="reference internal" href="#identification-and-properties">Identification and Properties</a></li>
<li><a class="reference internal" href="#overview">Overview</a><ul>
<li><a class="reference internal" href="#adpu-identification">ADPU Identification</a></li>
<li><a class="reference internal" href="#basic-ssl-support">Basic SSL Support</a></li>
<li><a class="reference internal" href="#availability">Availability</a></li>
<li><a class="reference internal" href="#dependencies">Dependencies</a></li>
<li><a class="reference internal" href="#see-also">See Also</a></li>
</ul>
</li>
<li><a class="reference internal" href="#ttcn-3-types-equivalence">TTCN-3 Types Equivalence</a></li>
</ul>
</li>
</ul>
</ul>
</li>
          
          
            
  <li><a href="CodecsRtsp.html"
         title="previous chapter">&laquo; RTSP Codecs</a></li>
  <li><a href="ProbeUdp.html"
         title="next chapter">UDP Probe &raquo;</a></li>
          
          
            <li>
  <a href="../../_sources/plugins/autogen/ProbeTcp.txt"
     rel="nofollow">Source</a></li>
          
        </ul>

        
          
<form class="navbar-search pull-right" style="margin-bottom:-3px;" action="../../search.html" method="get">
  <input type="text" name="q" placeholder="Search" />
  <input type="hidden" name="check_keywords" value="yes" />
  <input type="hidden" name="area" value="default" />
</form>
        
      </div>
    </div>
  </div>

  
  <div class="section" id="tcp-probe">
<h1>TCP Probe<a class="headerlink" href="#tcp-probe" title="Permalink to this headline">¶</a></h1>
<p>Send/receive TCP payloads.</p>
<div class="section" id="identification-and-properties">
<h2>Identification and Properties<a class="headerlink" href="#identification-and-properties" title="Permalink to this headline">¶</a></h2>
<p>Probe Type ID: <tt class="docutils literal"><span class="pre">tcp</span></tt></p>
<p>Properties:</p>
<table border="1" class="docutils">
<colgroup>
<col width="25%" />
<col width="25%" />
<col width="25%" />
<col width="25%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Name</th>
<th class="head">Type</th>
<th class="head">Default value</th>
<th class="head">Description</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td><tt class="docutils literal"><span class="pre">local_ip</span></tt></td>
<td>string</td>
<td>(empty - system assigned)</td>
<td>Local IP address to use when sending packets</td>
</tr>
<tr class="row-odd"><td><tt class="docutils literal"><span class="pre">local_port</span></tt></td>
<td>integer</td>
<td><tt class="docutils literal"><span class="pre">0</span></tt> (system assigned)</td>
<td>Local port to use when sending packets</td>
</tr>
<tr class="row-even"><td><tt class="docutils literal"><span class="pre">listening_ip</span></tt></td>
<td>string</td>
<td><tt class="docutils literal"><span class="pre">0.0.0.0</span></tt></td>
<td>Listening IP address, if listening mode is activated (see below)</td>
</tr>
<tr class="row-odd"><td><tt class="docutils literal"><span class="pre">listening_port</span></tt></td>
<td>integer</td>
<td><tt class="docutils literal"><span class="pre">0</span></tt></td>
<td>Set it to a non-zero port to start listening on mapping</td>
</tr>
<tr class="row-even"><td><tt class="docutils literal"><span class="pre">size</span></tt></td>
<td>integer</td>
<td><tt class="docutils literal"><span class="pre">0</span></tt></td>
<td>Fixed-size packet strategy: if set to non-zero, only raises messages when <tt class="docutils literal"><span class="pre">size</span></tt> bytes have been received. All raised messages will hage this constant size.</td>
</tr>
<tr class="row-odd"><td><tt class="docutils literal"><span class="pre">separator</span></tt></td>
<td>string</td>
<td><tt class="docutils literal"><span class="pre">None</span></tt></td>
<td>Separator-based packet strategy: if set to a character or a string, only raises messages when <tt class="docutils literal"><span class="pre">separator</span></tt> has been encountered; this separator is assumed to be a packet separator, and is not included in the raised message. May be useful for, for instance, x00-based packet protocols.</td>
</tr>
<tr class="row-even"><td><tt class="docutils literal"><span class="pre">enable_notifications</span></tt></td>
<td>boolean</td>
<td><tt class="docutils literal"><span class="pre">False</span></tt></td>
<td>If set, you may get connection/disconnection notification and connectionConfirm/Error notification messages</td>
</tr>
<tr class="row-odd"><td><tt class="docutils literal"><span class="pre">default_sut_address</span></tt></td>
<td>string (ip:port)</td>
<td><tt class="docutils literal"><span class="pre">None</span></tt></td>
<td>If set, used as a default SUT address if none provided by the user</td>
</tr>
<tr class="row-even"><td><tt class="docutils literal"><span class="pre">default_decoder</span></tt></td>
<td>string</td>
<td><tt class="docutils literal"><span class="pre">None</span></tt></td>
<td>If set, must be a valid codec name (aliases are currently not supported). This codec is then used to decode all incoming packets, and only the probe only raises an incoming message when the codec successfully decoded something. This is particular convenient when used with an incremental codec (such as <tt class="docutils literal"><span class="pre">'http.request'</span></tt>) that will then be responsible for identifying the actual application PDU in the TCP stream.</td>
</tr>
<tr class="row-odd"><td><tt class="docutils literal"><span class="pre">default_encoder</span></tt></td>
<td>string</td>
<td><tt class="docutils literal"><span class="pre">None</span></tt></td>
<td>If set, must be a valid codec name (aliases are currently not supported). This codec is then used to encode all outgoing packets, without a need to use it when sending the message through the port mapped to this probe.</td>
</tr>
<tr class="row-even"><td><tt class="docutils literal"><span class="pre">use_ssl</span></tt></td>
<td>boolean</td>
<td><tt class="docutils literal"><span class="pre">False</span></tt></td>
<td>If set, all outgoing and incoming traffic through is probe is transported over SSLv3. All TLS negotiations are performed by the probe. However, ...</td>
</tr>
<tr class="row-odd"><td><tt class="docutils literal"><span class="pre">ssl_key</span></tt></td>
<td>string</td>
<td><tt class="docutils literal"><span class="pre">None</span></tt></td>
<td>The SSL key to use if <tt class="docutils literal"><span class="pre">use_ssl``is</span> <span class="pre">set</span> <span class="pre">to</span> <span class="pre">``True</span></tt>. Contains a private key associated to <tt class="docutils literal"><span class="pre">ssl_certificate</span></tt>, in base64 format. If not provided, a default sample private key is used.</td>
</tr>
<tr class="row-even"><td><tt class="docutils literal"><span class="pre">ssl_certificate</span></tt></td>
<td>string</td>
<td><tt class="docutils literal"><span class="pre">None</span></tt></td>
<td>The SSL certificate to use if <tt class="docutils literal"><span class="pre">use_ssl``is</span> <span class="pre">set</span> <span class="pre">to</span> <span class="pre">``True</span></tt>. Contains a certificate in PEM format that will be used when a certificate is needed by the probe connection(s). If not provided, a default one that matches the default private key, is used.</td>
</tr>
<tr class="row-odd"><td><tt class="docutils literal"><span class="pre">connection_timeout</span></tt></td>
<td>float</td>
<td><tt class="docutils literal"><span class="pre">5.0</span></tt></td>
<td>The connection timeout, in s, when trying to connect to a remote party.</td>
</tr>
<tr class="row-even"><td><tt class="docutils literal"><span class="pre">auto_connect</span></tt></td>
<td>boolean</td>
<td><tt class="docutils literal"><span class="pre">True</span></tt></td>
<td>When sending a message, autoconnect to the provided address if there is no existing connections with this peer yet.</td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="overview">
<h2>Overview<a class="headerlink" href="#overview" title="Permalink to this headline">¶</a></h2>
<p>This is a general purpose probe to transport anything over TCP, with basic control on connections/disconnections
(you can get optional incoming connection notifications or outgoing connection confirmations, or simply focus on payload exchanges),
and a basic support for SSL (v3).</p>
<p>Such a probe may be used as a base to test any protocol transported over TCP.</p>
<p>Combined with the <tt class="docutils literal"><span class="pre">http.request</span></tt> and <tt class="docutils literal"><span class="pre">http.response</span></tt> codecs, this is enough to test anything based on HTTP/HTTPS. You may also use the <tt class="docutils literal"><span class="pre">diameter</span></tt> or <tt class="docutils literal"><span class="pre">sua</span></tt> codec, actually any codec that comes
with an incremental decoding implementation. You just have to define such a codec as the <tt class="docutils literal"><span class="pre">default_decoder</span></tt> property (used to decode incoming stream) or the <tt class="docutils literal"><span class="pre">default_encoder</span></tt> property (used to
encode outgoing messages).</p>
<div class="section" id="adpu-identification">
<h3>ADPU Identification<a class="headerlink" href="#adpu-identification" title="Permalink to this headline">¶</a></h3>
<p>The probe first waits for <tt class="docutils literal"><span class="pre">size</span></tt> bytes (if the <tt class="docutils literal"><span class="pre">size</span></tt> property is set) or (exclusively) for the <tt class="docutils literal"><span class="pre">separator</span></tt> character(s) (is the <tt class="docutils literal"><span class="pre">separator</span></tt> property is set).
If none of those properties are set, the probe only considers what it read in the stream (which is system-dependent).</p>
<p>Then, the default decoder, if set, tries to decode this first raw segment. If it needs more input, it waits for the next raw segment. If multiple APDUs are detected, multiple incoming messages are raised.
If undecodable data is detected, the raw segment is ignored.</p>
<p>If no decoder is set, the raw segment is raised as raw data.</p>
</div>
<div class="section" id="basic-ssl-support">
<h3>Basic SSL Support<a class="headerlink" href="#basic-ssl-support" title="Permalink to this headline">¶</a></h3>
<p>When the property <tt class="docutils literal"><span class="pre">use_ssl</span></tt> is set to True, the probe automatically performs SSL negotiations after a TCP connection (probe as a client) or when accepting a new incoming connection (as a server).</p>
<p>If <tt class="docutils literal"><span class="pre">enable_notifications</span></tt> is True, the <tt class="docutils literal"><span class="pre">connectionConfirm</span></tt> message will contain the server&#8217;s certificate in DER format. The <tt class="docutils literal"><span class="pre">connectionNotification</span></tt> message is planned
to contain the client&#8217;s certificate as well, but it is currently not possible to force the (server side) probe to request it.</p>
<p>In addition, received certificates are not validated, and hostnames are not verified.</p>
<p>This probe offers very little control on these negotiations and is not meant to test SSL-level stuff (for instance, how a SUT implemented SSL itself).
This support is provided as a convenience to interact with a SUT through higher-level protocols that have been ported over SSL (HTTP, SIP, ...).</p>
<p>When using this probe as a server in SSL mode, if you don&#8217;t provide the <tt class="docutils literal"><span class="pre">ssl_key</span></tt> and <tt class="docutils literal"><span class="pre">ssl_certificate</span></tt> parameters, a default pair is used.
The default certificate is:</p>
<div class="highlight-python"><pre>-----BEGIN CERTIFICATE-----
MIICPTCCAaYCCQDP2Zlsj6TqTDANBgkqhkiG9w0BAQUFADBjMQswCQYDVQQGEwJG
UjERMA8GA1UECBMIR3Jlbm9ibGUxDzANBgNVBAcTBk1leWxhbjESMBAGA1UEChMJ
VGVzdGVybWFuMRwwGgYDVQQDExNzYW1wbGUudGVzdGVybWFuLmZyMB4XDTEwMDcx
MzE1NTMwNloXDTIwMDcxMDE1NTMwNlowYzELMAkGA1UEBhMCRlIxETAPBgNVBAgT
CEdyZW5vYmxlMQ8wDQYDVQQHEwZNZXlsYW4xEjAQBgNVBAoTCVRlc3Rlcm1hbjEc
MBoGA1UEAxMTc2FtcGxlLnRlc3Rlcm1hbi5mcjCBnzANBgkqhkiG9w0BAQEFAAOB
jQAwgYkCgYEA4scEJ3BC7WcWHYHM0Z7O5rRz5W4231OfKoOCFROoV9QWzqGhvkpJ
IOLUVkV9SEc9tZICUdHRnmTMacwRG75YyUV8wg4w1EqVyIysRVyQySXOr8YzjZ5N
BJ924nw3lwk7pms2EGIBAiTmrUdEXYD97qrzaOSER3GMUmZWaSwFGf0CAwEAATAN
BgkqhkiG9w0BAQUFAAOBgQDET13MT8ctRiuQkfCLO8D9iyKjT94FRe+ocPbUjOts
gjkrh5miH91MhabQrqEcwOArF+2yuakvfgdPP3KbHgBXDwtYg/+wqAj4e/74D6Ai
Ud0h6vHFVZreLZm7F1QNLpgUSrPxra2xkTiH7NxEMYlJheGCnJ4F6YP3IdKMUicZ
Og==
-----END CERTIFICATE-----</pre>
</div>
</div>
<div class="section" id="availability">
<h3>Availability<a class="headerlink" href="#availability" title="Permalink to this headline">¶</a></h3>
<p>All platforms. However, SSL support depends on the Python SSL module, provided by default with Python 2.6 and later on Unix platforms.</p>
</div>
<div class="section" id="dependencies">
<h3>Dependencies<a class="headerlink" href="#dependencies" title="Permalink to this headline">¶</a></h3>
<p>None.</p>
</div>
<div class="section" id="see-also">
<h3>See Also<a class="headerlink" href="#see-also" title="Permalink to this headline">¶</a></h3>
<p>Other transport-oriented probes:</p>
<ul class="simple">
<li><a class="reference internal" href="ProbeSctp.html"><em>SCTP Probe</em></a></li>
<li><a class="reference internal" href="ProbeUdp.html"><em>UDP Probe</em></a></li>
</ul>
</div>
</div>
<div class="section" id="ttcn-3-types-equivalence">
<h2>TTCN-3 Types Equivalence<a class="headerlink" href="#ttcn-3-types-equivalence" title="Permalink to this headline">¶</a></h2>
<p>The test system interface port bound to such a probe complies with the <tt class="docutils literal"><span class="pre">TransportProbePortType</span></tt> port type as specified below:</p>
<div class="highlight-python"><pre>type union NotificationType
{
  record { octetstring certificate optional } connectionNotification, // new incoming connection established
  charstring disconnectionNotification, // contains a human readable reason to the disconnection
  record { octetstring certificate optional } connectionConfirm, // connection request OK
  charstring connectionError, // contains a human readable error after a connection request
}

type union RequestType
{
  any connectionRequest, // request a new tcp-connection
  any disconnectionRequest, // request a disconnection. Except a disconnectionNotification later
}

type TransportProbePortType
{
  in RequestType;
  out NotificationType;
  in, out octetstring;
  out any; // if the default_decoder is used, the raised structure is the decoder's output
  in any; // if the default_encoder is used
}</pre>
</div>
</div>
</div>


</div>
<footer class="footer">
  <div class="container">
    <p class="pull-right">
      <a href="#">Back to top</a>
      
    </p>
    <p>
        &copy; Copyright 2009-2013, Sébastien Lefèvre.<br/>
      Created using <a href="http://sphinx.pocoo.org/">Sphinx</a> 1.1.3.<br/>
    </p>
  </div>
</footer>

<script type="text/javascript">
  var _gaq = _gaq || [];
  _gaq.push(['_setAccount', 'UA-7213508-2']);
  _gaq.push(['_trackPageview']);
  (function() {
    var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
    ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
  })();
</script>
  </body>
</html>